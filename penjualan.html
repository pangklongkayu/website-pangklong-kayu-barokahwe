<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POS Kayu - Penjualan</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5;}
header { background:#2e7d32; color:white; padding:20px; text-align:center;}
nav { display:flex; background:#1b5e20; }
nav a { flex:1; color:white; text-decoration:none; text-align:center; padding:15px; font-weight:bold; }
nav a:hover { background:#145a0b; }
.container { max-width:1000px; margin:20px auto; background:white; padding:20px; border-radius:8px; }
input, select, button { width:100%; padding:10px; margin:5px 0; box-sizing:border-box; }
button { background:#2e7d32; color:white; border:none; cursor:pointer; }
button:hover { background:#145a0b; }
table { width:100%; border-collapse:collapse; margin-top:10px;}
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#2e7d32; color:white; }
.total { margin-top:10px; text-align:right; font-weight:bold; }
</style>
</head>
<body>

<header>
<h1>Pangklong Kayu Barokah - POS</h1>
</header>

<nav>
	<a href="./index.html">Beranda</a>
	<a href="./profil.html">Profil</a>
	<a href="./produk.html">Produk</a>
	<a href="./stok.html">Stok Kayu</a>
	<a href="./penjualan.html">Penjualan</a>
	<a href="./komentar.html">Komentar</a>
	<a href="./tambahstock.html">Tambah Stok</a>
</nav>
	
<div class="container">

<h2>Input Transaksi</h2>
<label>Tanggal</label>
<input type="date" id="tanggal">

<label>Nama Pembeli</label>
<input type="text" id="pembeli" placeholder="Masukkan nama pembeli">

<label>Jenis & Ukuran Kayu</label>
<select id="jenisKayu" onchange="updateHarga()"></select>

<label>Harga per Batang</label>
<input type="text" id="hargaSatuan" readonly>

<label>Jumlah Batang</label>
<input type="number" id="jumlah" placeholder="Masukkan jumlah batang">

<button onclick="tambahTransaksi()">Tambahkan Transaksi</button>

<h2>Daftar Transaksi</h2>
<table>
<thead>
<tr>
<th>No</th>
<th>Tanggal</th>
<th>Pembeli</th>
<th>Jenis Kayu</th>
<th>Jumlah</th>
<th>Harga per Batang</th>
<th>Total Harga</th>
</tr>
</thead>
<tbody id="tabelTransaksi"></tbody>
</table>

<h2>Stok Kayu</h2>
<table>
<thead>
<tr>
<th>No</th>
<th>Jenis Kayu</th>
<th>Ukuran</th>
<th>Stok</th>
<th>Harga per Batang</th>
<th>Harga per m³</th>
</tr>
</thead>
<tbody id="tabelStok"></tbody>
</table>

<div class="total" id="totalSemua">Total Penjualan: Rp 0</div>
</div>

<script>
// Data stok kayu
let stokKayu = [
    {jenis:"Mentru", ukuran:"5x10x4", stok:300, harga:60000},
    {jenis:"Mentru", ukuran:"8x12x4", stok:300, harga:115000},
    {jenis:"Mentru", ukuran:"6x12x4", stok:250, harga:85000},
    {jenis:"Mentru", ukuran:"2x3x4", stok:5000, harga:8000},
    {jenis:"Mentru", ukuran:"5x5x4", stok:3000, harga:27000},
    {jenis:"Sengon", ukuran:"5x10x4", stok:300, harga:55000},
    {jenis:"Sengon", ukuran:"8x12x4", stok:300, harga:100000},
    {jenis:"Sengon", ukuran:"6x12x4", stok:250, harga:75000},
    {jenis:"Sengon", ukuran:"2x3x4", stok:5000, harga:7000},
    {jenis:"Sengon", ukuran:"5x5x4", stok:3000, harga:27000},
    {jenis:"Racuk", ukuran:"5x10x4", stok:300, harga:55000},
    {jenis:"Racuk", ukuran:"8x12x4", stok:300, harga:100000},
    {jenis:"Racuk", ukuran:"6x12x4", stok:250, harga:75000},
    {jenis:"Racuk", ukuran:"2x3x4", stok:5000, harga:7000},
    {jenis:"Racuk", ukuran:"5x5x4", stok:3000, harga:27000}
];

// Dropdown jenis kayu
const selectJenis = document.getElementById("jenisKayu");
function initDropdown(){
    selectJenis.innerHTML="";
    stokKayu.forEach((item,index)=>{
        let option = document.createElement("option");
        option.value = index;
        option.text = item.jenis + " - " + item.ukuran + " | Stok: "+item.stok;
        selectJenis.add(option);
    });
}
initDropdown();

// Tabel stok
function tampilStok(){
    const tabel = document.getElementById("tabelStok");
    tabel.innerHTML="";
    stokKayu.forEach((item,index)=>{
        let row = tabel.insertRow();
        row.insertCell(0).innerText = index+1;
        row.insertCell(1).innerText = item.jenis;
        row.insertCell(2).innerText = item.ukuran;
        row.insertCell(3).innerText = item.stok;
        row.insertCell(4).innerText = "Rp " + item.harga.toLocaleString("id-ID");
        let [px,py,pz] = item.ukuran.split("x").map(Number);
        let volume = (px*py*pz)/1000000; // m³
        row.insertCell(5).innerText = "Rp " + Math.round(item.harga/volume).toLocaleString("id-ID") + "/m³";
    });
}
tampilStok();

// Update harga saat pilih kayu
function updateHarga(){
    let item = stokKayu[selectJenis.value];
    document.getElementById("hargaSatuan").value = "Rp "+item.harga.toLocaleString("id-ID");
}

// Transaksi
let totalPenjualan = 0;
let nomorTransaksi = 1;
function tambahTransaksi(){
    let tanggal = document.getElementById("tanggal").value;
    let pembeli = document.getElementById("pembeli").value;
    let jumlah = parseInt(document.getElementById("jumlah").value);
    let item = stokKayu[selectJenis.value];

    if(!tanggal || !pembeli || !jumlah || jumlah<=0){
        alert("Isi semua data dengan benar!");
        return;
    }
    if(jumlah>item.stok){
        alert("Stok tidak cukup!");
        return;
    }

    let totalHarga = jumlah*item.harga;
    totalPenjualan += totalHarga;

    // Tambah ke tabel transaksi
    let tabel = document.getElementById("tabelTransaksi");
    let row = tabel.insertRow();
    row.insertCell(0).innerText = nomorTransaksi++;
    row.insertCell(1).innerText = tanggal;
    row.insertCell(2).innerText = pembeli;
    row.insertCell(3).innerText = item.jenis + " - " + item.ukuran;
    row.insertCell(4).innerText = jumlah;
    row.insertCell(5).innerText = "Rp "+item.harga.toLocaleString("id-ID");
    row.insertCell(6).innerText = "Rp "+totalHarga.toLocaleString("id-ID");

    // Kurangi stok
    item.stok -= jumlah;
    initDropdown();
    tampilStok();

    // Update total penjualan
    document.getElementById("totalSemua").innerText = "Total Penjualan: Rp "+totalPenjualan.toLocaleString("id-ID");

    // Reset form
    document.getElementById("tanggal").value="";
    document.getElementById("pembeli").value="";
    document.getElementById("jumlah").value="";
}

updateHarga();
</script>

</body>

</html>



